<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>JVM性能监控工具 | CHENBAOCHENG.COM</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="在 java 的 bin 目录下，jdk 提供了很多使用的工具，下面学习一些监控和故障处理的工具。



名称
作用




jps
JVM process status tool，显示指定系统内所有的 HotSpot 虚拟机进程


jstat
JVM statistics monitoring tool，用于收集 HotSpot 虚拟机各方面的运行数据


jinfo
显示虚拟机配置信息">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM性能监控工具">
<meta property="og:url" content="http://www.chenbaocheng.com/2015/06/15/JVM性能监控工具/">
<meta property="og:site_name" content="CHENBAOCHENG.COM">
<meta property="og:description" content="在 java 的 bin 目录下，jdk 提供了很多使用的工具，下面学习一些监控和故障处理的工具。



名称
作用




jps
JVM process status tool，显示指定系统内所有的 HotSpot 虚拟机进程


jstat
JVM statistics monitoring tool，用于收集 HotSpot 虚拟机各方面的运行数据


jinfo
显示虚拟机配置信息">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JVM性能监控工具">
<meta name="twitter:description" content="在 java 的 bin 目录下，jdk 提供了很多使用的工具，下面学习一些监控和故障处理的工具。



名称
作用




jps
JVM process status tool，显示指定系统内所有的 HotSpot 虚拟机进程


jstat
JVM statistics monitoring tool，用于收集 HotSpot 虚拟机各方面的运行数据


jinfo
显示虚拟机配置信息">

  
    <link rel="alternative" href="/atom.xml" title="CHENBAOCHENG.COM" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <!--[if lt IE 9]>  <script src="/js/html5.js" type="text/javascript"></script>
 <![endif]-->
  
</head>
<body>
  <div id="container">
    <div class="mobile-nav-panel">
	<i class="icon-reorder icon-large"></i>
</div>
<header id="header">
	<nav class="nav">
		<ul>
			<li><a href="/">首页</a></li><li><a href="/archives">文章</a></li><li><a href="/categories">分类</a></li><li><a href="/about">关于</a></li>
			<li><a id="nav-search-btn" class="nav-icon" title="Search"></a></li>
			<li><a target="_blank" href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS Feed"></a></li>
		</ul>
	</nav>
	<div id="search-form-wrap">
		<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://www.chenbaocheng.com"></form>
	</div>
</header>
    <div id="main">
      <article id="post-JVM性能监控工具" class="post">
	<footer class="entry-meta-header">
		<span class="meta-elements date">
			<a href="/2015/06/15/JVM性能监控工具/" class="article-date">
  <time datetime="2015-06-15T07:50:07.000Z" itemprop="datePublished">6月 15 2015</time>
</a>
		</span>
		<!-- <span class="meta-elements author">CBC</span> -->
		<div class="commentscount">
			
		</div>
	</footer>
	
	<header class="entry-header">
		
  
    <h1 class="article-title entry-title" itemprop="name">
      JVM性能监控工具
    </h1>
  

	</header>
	<div class="entry-content">
		
    	<p>在 java 的 bin 目录下，jdk 提供了很多使用的工具，下面学习一些监控和故障处理的工具。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>jps</td>
<td>JVM process status tool，显示指定系统内所有的 HotSpot 虚拟机进程</td>
</tr>
<tr>
<td>jstat</td>
<td>JVM statistics monitoring tool，用于收集 HotSpot 虚拟机各方面的运行数据</td>
</tr>
<tr>
<td>jinfo</td>
<td>显示虚拟机配置信息</td>
</tr>
<tr>
<td>jmap</td>
<td>生产虚拟机的内存快照 dump 文件</td>
</tr>
<tr>
<td>jhat</td>
<td>分析 dump 文件</td>
</tr>
<tr>
<td>jstack</td>
<td>显示虚拟机的线程快照</td>
</tr>
</tbody>
</table>
<a id="more"></a>

<hr>
<h4 id="jps_虚拟机进程状况工具">jps 虚拟机进程状况工具</h4>
<pre><code>命令格式：
<span class="tag">jps</span> <span class="attr_selector">[options]</span> <span class="attr_selector">[hostid]</span>

<span class="tag">jps</span> 可以查看通过 <span class="tag">rmi</span> 协议查询开启了 <span class="tag">rmi</span> 服务的原创虚拟机进程状态，<span class="tag">hostid</span> 是 <span class="tag">rmi</span> 注册表中注册的主机。
</code></pre><h6 id="options">options</h6>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-q</td>
<td>只输出 LVMID，省略主类的名称</td>
</tr>
<tr>
<td>-m</td>
<td>输出虚拟机启动时候传递给 main 方法的参数</td>
</tr>
<tr>
<td>-l</td>
<td>输出类的全名</td>
</tr>
<tr>
<td>-v</td>
<td>输出虚拟机进程启动时 JVM 参数</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="jstack_分析_java_堆栈">jstack 分析 java 堆栈</h4>
<p>jstack 用来生成当前时刻线程快照。</p>
<pre><code>命令格式：
jstack [ <span class="preprocessor">option</span> ] pid
jstack [ <span class="preprocessor">option</span> ] executable core
jstack [ <span class="preprocessor">option</span> ] [server-id@]remote-hostname-<span class="keyword">or</span>-<span class="literal">IP</span>
</code></pre><hr>
<h4 id="jstat_虚拟机统计信息监视工具">jstat 虚拟机统计信息监视工具</h4>
<p>jstat 可以显示本地或者远程虚拟机进程中的类装载、内存、垃圾收集、 JIT 编译等运行数据。</p>
<pre><code>命令格式：
<span class="tag">jstat</span> <span class="attr_selector">[option vmid [interval]</span> <span class="attr_selector">[count]</span>]
</code></pre><h6 id="option">option</h6>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>-class</td>
<td>监视类装载、卸载数量、总看见以及类装载消耗的时间</td>
</tr>
<tr>
<td>-gc</td>
<td>监视 java 堆状况，包括 eden 区、两个 survivor 区、年老代、永久代等的容量、已用空间、gc 时间合计等</td>
</tr>
<tr>
<td>-gccapacity</td>
<td>内容与 -gc 基本相同，输出主要关注 java 堆各个区使用到的最大、最小空间</td>
</tr>
<tr>
<td>-gcutil</td>
<td>内容与 -gc 基本相同，关注已使用区域占总空间的百分比</td>
</tr>
<tr>
<td>-gccause</td>
<td>内容与 -gcutil 一样，并且多输出导致上一次 gc 产生的原因</td>
</tr>
<tr>
<td>-gcnew</td>
<td>监视新生代状况</td>
</tr>
<tr>
<td>-gcnewcapacity</td>
<td>与 -gcnew 相同，主要关注使用到的最大、最小空间</td>
</tr>
<tr>
<td>-compiler</td>
<td>输出 JIT 编译器编译过的方法、耗时等信息</td>
</tr>
</tbody>
</table>
<h6 id="-gcutil_所产生的内容：">-gcutil 所产生的内容：</h6>
<pre><code>S0、S1 分别代表了 Survivor0 和 Survivor1;
<span class="keyword">E</span> 代表 Eden 区;
<span class="keyword">O</span> 代表老年区;
P 代表永久代;
YGC 代表 Young GC 的次数;
YGCT 代表时间
</code></pre><hr>
<h4 id="jinfo_查看_java_配置信息工具">jinfo 查看 java 配置信息工具</h4>
<pre><code>命令格式：
jinfo [ <span class="preprocessor">option</span> ] pid
jinfo [ <span class="preprocessor">option</span> ] executable core
jinfo [ <span class="preprocessor">option</span> ] [ server-id@ ] remote-hostname-<span class="keyword">or</span>-<span class="literal">IP</span>
</code></pre><hr>
<h4 id="jmap_生产_java_内存_dump">jmap 生产 java 内存 dump</h4>
<p>jmap 除了可以生成 dump 文件外，还可以查询 finalize 执行队列，java 堆和永久代的详细信息，如空间使用率和当前用的是哪种收集器等。</p>
<pre><code>命令格式：
jmap [ <span class="preprocessor">option</span> ] pid
jmap [ <span class="preprocessor">option</span> ] executable core
jmap [ <span class="preprocessor">option</span> ] [ server-id@ ] remote-hostname-<span class="keyword">or</span>-<span class="literal">IP</span>
</code></pre><h6 id="option-1">option</h6>
<pre><code>-<span class="ruby">heap
</span>-<span class="ruby">permstat</span>
</code></pre><hr>
<h4 id="jhat_虚拟机堆快照分析工具">jhat 虚拟机堆快照分析工具</h4>
<p>我们可以使用 jhat 来分析 jmap 生成的 dump 文件。默认会开 7000 端口进行 web 访问。一般不使用这个命令来分析，会使用专业的工具来分析 dump 文件，如 eclipse memory analyzer 等。</p>

    
	</div>
	<footer class="entry-footer">
		<div class="entry-meta-footer">
			<span class="category">
				
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

			</span>
			<span class="tags">
				
			</span>
		</div>
	</footer>
	
    
<nav id="article-nav">
  
  
    <a href="/2015/06/15/Mac-OS-X下使用-Charles-进行抓包/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          Mac OS X下使用 Charles 进行抓包
        
      </div>
    </a>
  
</nav>

  
</article>




    </div>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:www.chenbaocheng.com">
  </form>
</div>
<footer id="footer">
	<h1 class="footer-blog-title">
		<a href="/">CHENBAOCHENG.COM</a>
	</h1>
	<span class="copyright">
		&copy; 2015 CBC<br>
		Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	</span>
</footer>
    

<script src="/js/jquery.min.js" type="text/javascript"></script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>